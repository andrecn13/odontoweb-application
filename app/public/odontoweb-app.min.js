function openSideMenu(){document.getElementById("side-menu").style.width="250px"}function closeSideMenu(){document.getElementById("side-menu").style.width="0"}var app=angular.module("OdontowebApp",["ngRoute","ngResource","angular-jwt","restangular","mwl.calendar"]);app.factory("JWTInterceptor",["$q","$window",function(t,o){return{request:function(t){return t.headers=t.headers||{},o.sessionStorage.token&&(t.headers["X-Auth-Token"]=o.sessionStorage.token),t},response:function(o){return o||t.when(o)},requestError:function(o){return t.reject(o)},responseError:function(o){return t.reject(o)}}}]),app.config(["$routeProvider","$httpProvider",function(t,o){t.when("/",{templateUrl:"partials/agenda/index.html",controller:"AgendaController"}).when("/pacientes",{templateUrl:"partials/pacientes/index.html",controller:"PacientesController"}).when("/cadastros",{templateUrl:"partials/cadastros/index.html",controller:"CadastrosController"}).when("/configuracoes",{templateUrl:"partials/configuracoes/index.html",controller:"ConfiguracoesController"}).when("/login",{templateUrl:"partials/authentication/login.html",controller:"AuthenticationController"}).when("/cadastros/bairro",{templateUrl:"partials/cadastros/bairro/list.html",controller:"ListarBairroController"}).when("/cadastros/bairro/novo",{templateUrl:"partials/cadastros/bairro/new.html",controller:"CadastrarBairroController"}).when("/cadastros/bairro/editar/:id",{templateUrl:"partials/cadastros/bairro/edit.html",controller:"EditarBairroController"}).when("/cadastros/cep",{templateUrl:"partials/cadastros/cep/list.html",controller:"ListarCepController"}).when("/cadastros/cep/novo",{templateUrl:"partials/cadastros/cep/new.html",controller:"CadastrarCepController"}).when("/cadastros/cep/editar/:id",{templateUrl:"partials/cadastros/cep/edit.html",controller:"EditarCepController"}).when("/cadastros/sigla",{templateUrl:"partials/cadastros/sigla/list.html",controller:"ListarSiglaController"}).when("/cadastros/sigla/novo",{templateUrl:"partials/cadastros/sigla/new.html",controller:"CadastrarSiglaController"}).when("/cadastros/sigla/editar/:id",{templateUrl:"partials/cadastros/sigla/edit.html",controller:"EditarSiglaController"}).when("/cadastros/estado",{templateUrl:"partials/cadastros/estado/list.html",controller:"ListarEstadoController"}).when("/cadastros/estado/novo",{templateUrl:"partials/cadastros/estado/new.html",controller:"CadastrarEstadoController"}).when("/cadastros/estado/editar/:id",{templateUrl:"partials/cadastros/estado/edit.html",controller:"EditarEstadoController"}).when("/cadastros/cidade",{templateUrl:"partials/cadastros/cidade/list.html",controller:"ListarCidadeController"}).when("/cadastros/cidade/novo",{templateUrl:"partials/cadastros/cidade/new.html",controller:"CadastrarCidadeController"}).when("/cadastros/cidade/editar/:id",{templateUrl:"partials/cadastros/cidade/edit.html",controller:"EditarCidadeController"}).when("/cadastros/consulta/tipo",{templateUrl:"partials/cadastros/consulta/tipo/list.html",controller:"ListarConsultaTipoController"}).when("/cadastros/consulta/tipo/novo",{templateUrl:"partials/cadastros/consulta/tipo/new.html",controller:"CadastrarConsultaTipoController"}).when("/cadastros/consulta/tipo/editar/:id",{templateUrl:"partials/cadastros/consulta/tipo/edit.html",controller:"EditarConsultaTipoController"}).otherwise({templateUrl:"partials/no_page.html"}),o.interceptors.push("JWTInterceptor")}]),app.run(["$rootScope","$location","AuthorizationService",function(t,o,e){t.$on("$routeChangeStart",function(t,a,r){a.$$route.hasOwnProperty("requireLogin")||e.isLogged()||o.path("/login")}),t.userName=function(){return e.getUserName()},t.isLogged=function(){return e.isLogged()},t.showElement=function(){return e.isLogged()},t.go=function(t){o.path(t)}}]),app.controller("AgendaController",["$scope",function(t){moment.locale("pt-br"),t.calendarView="month",t.viewDate=new Date,t.events=[{title:"André",startsAt:moment().startOf("day").add(13,"hours").toDate(),endsAt:moment().startOf("day").add(13,"hours").add(30,"minutes").toDate()},{title:"Fernando",startsAt:moment().startOf("week").add(7,"hours").toDate(),endsAt:moment().startOf("week").add(7,"hours").add(30,"minutes").toDate()},{title:"Paulo",startsAt:moment().startOf("day").add(7,"hours").toDate(),endsAt:moment().startOf("day").add(7,"hours").add(30,"minutes").toDate()}]}]),app.factory("AlertService",["$rootScope",function(t){var o={};return t.alerts=[],o.add=function(o,e){t.alerts=[],t.alerts.push({type:o,msg:e})},o.clear=function(){t.alerts=[]},o}]),app.controller("AuthenticationController",["$scope","$window","$location","AuthenticationService","AuthorizationService","$rootScope",function(t,o,e,a,r,n){t.title="Acesso ao Sistema",t.subTitle="Preencha os dados de seu login para acessar o sistema.",t.user={},t.erro=!1,t.login=function(){void 0!==t.user.email&&void 0!==t.user.senha&&a.login(t.user,function(t){o.sessionStorage.token=t.token,n.$broadcast("loginEvent"),e.path("/")},function(o,e){t.erro=!0})},t.logout=function(){r.isLogged()&&(delete o.sessionStorage.token,t.user={},e.path("/login"))}}]),app.factory("AuthenticationService",["$resource",function(t){return t("/login",{},{login:{method:"POST"}})}]),app.factory("AuthorizationService",["$window","jwtHelper",function(t,o){var e={isLogged:function(){return void 0!=t.sessionStorage.token},getUserName:function(){return void 0!=t.sessionStorage.token?o.decodeToken(t.sessionStorage.token).sub:""},getTenant:function(){return void 0!=t.sessionStorage.token?o.decodeToken(t.sessionStorage.token).tenant:""}};return e}]),app.controller("CadastrosController",["$scope",function(t){t.title="Gerenciador de Cadastros",t.subTitle="Selecione um tipo de cadastro"}]),app.controller("ClinicaController",["$scope","Restangular","AuthorizationService","$rootScope","$location","$window",function(t,o,e,a,r,n){function l(){e.isLogged()&&o.one("me").get().then(function(o){t.me=o;var a=e.getTenant();for(var r in o.clinicas)o.clinicas[r].cnpj==a&&(t.clinicaSelected=o.clinicas[r])})}l(),a.$on("loginEvent",function(){console.log("event"),l()}),t.changeTenant=function(){o.one("change/tenant/"+t.clinicaSelected.id).get().then(function(t){n.sessionStorage.token=t.token,a.$broadcast("loginEvent"),r.path("/")})}}]),app.controller("ConfiguracoesController",["$scope",function(t){t.title="Página em contrução"}]),app.directive("breadcrumb",["$location","$window",function(t,o){return{restrict:"E",templateUrl:"partials/directives/breadcrumb.html",link:function(e,a,r){e.paths=_.filter(t.path().split("/"),function(t){return""!=t}),e.back=function(){o.history.back()}}}}]),app.directive("menuAtivo",["$location",function(t){return{restrict:"A",link:function(o,e,a,r){var n=a.href;n=n.substring(1),o.location=t,o.$watch("location.path()",function(t){n.split("/")[1]===t.split("/")[1]?$(e).parent().addClass("menu-ativo"):$(e).parent().removeClass("menu-ativo")})}}}]),app.controller("PacientesController",["$scope",function(t){t.title="Página em contrução"}]),app.controller("ListarBairroController",["$scope","Restangular",function(t,o){var e=o.all("bairro");t.title="Gerenciador de Bairros",t.bairros=[],e.getList().then(function(o){t.bairros=o})}]),app.controller("CadastrarBairroController",["$scope","Restangular","$location",function(t,o,e){var a=o.all("bairro");t.save=function(o){o&&a.post(t.bairro).then(function(t){e.path("/cadastros/bairro")})}}]),app.controller("EditarBairroController",["$scope","Restangular","$location","$routeParams",function(t,o,e,a){o.one("bairro",a.id).get().then(function(o){t.bairro=o}),t.editar=function(o){o&&t.bairro.put().then(function(t){e.path("/cadastros/bairro")})}}]),app.controller("ListarCepController",["$scope","Restangular",function(t,o){var e=o.all("cep");t.title="Gerenciador de CEP",t.ceps=[],e.getList().then(function(o){t.ceps=o})}]),app.controller("CadastrarCepController",["$scope","Restangular","$location",function(t,o,e){var a=o.all("cep");t.save=function(o){o&&a.post(t.cep).then(function(t){e.path("/cadastros/cep")})}}]),app.controller("EditarCepController",["$scope","Restangular","$location","$routeParams",function(t,o,e,a){o.one("cep",a.id).get().then(function(o){t.cep=o}),t.editar=function(o){o&&t.cep.put().then(function(t){e.path("/cadastros/cep")})}}]),app.controller("ListarCidadeController",["$scope","Restangular",function(t,o){var e=o.all("cidade");t.title="Gerenciador de cidades",t.cidades=[],e.getList().then(function(o){t.cidades=o})}]),app.controller("CadastrarCidadeController",["$scope","Restangular","$location",function(t,o,e){var a=o.all("cidade"),r=o.all("estado");t.estados=[],r.getList().then(function(o){t.estados=o}),t.save=function(o){o&&a.post(t.cidade).then(function(t){e.path("/cadastros/cidade")})}}]),app.controller("EditarCidadeController",["$scope","Restangular","$location","$routeParams",function(t,o,e,a){var r=o.all("estado");t.estados=[],r.getList().then(function(o){t.estados=o}),o.one("cidade",a.id).get().then(function(o){t.cidade=o}),t.editar=function(o){o&&t.cidade.put().then(function(t){e.path("/cadastros/cidade")})}}]),app.controller("ListarEstadoController",["$scope","Restangular",function(t,o){var e=o.all("estado");t.title="Gerenciador de Estados",t.estados=[],e.getList().then(function(o){t.estados=o})}]),app.controller("CadastrarEstadoController",["$scope","Restangular","$location",function(t,o,e){var a=o.all("estado"),r=o.all("sigla");t.siglas=[],r.getList().then(function(o){t.siglas=o}),t.save=function(o){o&&a.post(t.estado).then(function(t){e.path("/cadastros/estado")})}}]),app.controller("EditarEstadoController",["$scope","Restangular","$location","$routeParams",function(t,o,e,a){var r=o.all("sigla");t.siglas=[],r.getList().then(function(o){t.siglas=o}),o.one("estado",a.id).get().then(function(o){t.estado=o}),t.editar=function(o){o&&t.estado.put().then(function(t){e.path("/cadastros/estado")})}}]),app.controller("ListarSiglaController",["$scope","Restangular",function(t,o){var e=o.all("sigla");t.title="Gerenciador de UF",t.siglas=[],e.getList().then(function(o){t.siglas=o})}]),app.controller("CadastrarSiglaController",["$scope","Restangular","$location",function(t,o,e){var a=o.all("sigla");t.save=function(o){o&&a.post(t.sigla).then(function(t){e.path("/cadastros/sigla")})}}]),app.controller("EditarSiglaController",["$scope","Restangular","$location","$routeParams",function(t,o,e,a){o.one("sigla",a.id).get().then(function(o){t.sigla=o}),t.editar=function(o){o&&t.sigla.put().then(function(t){e.path("/cadastros/sigla")})}}]),app.controller("ListarConsultaTipoController",["$scope","Restangular",function(t,o){var e=o.all("consulta/tipo");t.title="Gerenciador de tipos de consulta",t.tipos=[],e.getList().then(function(o){t.tipos=o})}]),app.controller("CadastrarConsultaTipoController",["$scope","Restangular","$location",function(t,o,e){var a=o.all("consulta/tipo");t.save=function(o){o&&a.post(t.tipo).then(function(t){e.path("/cadastros/consulta/tipo")})}}]),app.controller("EditarConsultaTipoController",["$scope","Restangular","$location","$routeParams",function(t,o,e,a){o.one("consulta/tipo",a.id).get().then(function(o){t.tipo=o}),t.editar=function(o){o&&t.tipo.put().then(function(t){e.path("/cadastros/consulta/tipo")})}}]);